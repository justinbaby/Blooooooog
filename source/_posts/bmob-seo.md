---
title: 关于 Bmob SDK导致应用出现后台广告的调查
date: 2017-05-28 19:35:00
categories: 大新闻
thumbnail: https://ooo.0o0.ooo/2017/05/29/592bf381a33b6.png
---
> 本文已过时，仅供参考。此事后续进展请移步 [Bmob SDK导致应用出现广告始末](https://hexo.trumeet.top/2017/06/07/bmob-pay-result/)

# 前言

近期，我的App收到酷友反馈，说抓包到了很多不干净的东西。我当时大吃一惊，因为App没有任何相关代码，并开始调查此事。

# 原因
首先，排除了我主动操作的原因，只剩下第三方闭源SDK导致。因为App内没有任何相关代码。
其次，根据用户反馈，只有 **酷安** 上的版本有这种情况，**Play商店** 上没有，这也就将罪魁祸首指定在了两个SDK上： **Bmob支付** 和 **TinkerPatch** ，因为酷安和Play版仅有这两处不同。
第三，排除了 **TinkerPatch** 的可能性，因为这个SDK是开源的。

**所以，只剩下了 Bmob SDK**。

# 抓包
我通过和酷友联系，也自己抓包，抓到了如下结果：
* SDK在初始化后，后台 **随机** 刷指定网址（百度/hao123/广告） 等内容，浪费用户流量和性能
* 这些操作是随机的，且关闭屏幕就停止，很难抓到
* 经检查，其通常是 **几秒钟刷一次，持续几分钟**

一个抓到的代表性结果：
![广告图片](https://ooo.0o0.ooo/2017/05/28/592ab45cb9119.jpg)
![抓包工具](https://ooo.0o0.ooo/2017/05/28/592ab45cd9535.png)

我也抓到了更多结果，这里不方便继续共享。

同时，该SDK核心代码均使用 Native 实现，很难进行分析。

# 后台播放视频
这几天，接到了用户反馈，说App追发出一些诡异的广告声音！ 我第一时间想到这很可能是 Bmob SDK 导致，并在酷安发了帖子，许多开发者表示出现同样问题，由此判断这很可能 Bmob SDK 导致的。

# 事件影响
该事件导致用户对我们的软件反馈不好，这也很可能是运营商劫持的后果，希望Bmob彻查此事。
